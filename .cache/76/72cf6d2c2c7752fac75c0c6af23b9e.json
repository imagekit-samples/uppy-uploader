{"id":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","dependencies":[{"name":"/Users/manuchaudhary/uppy-uploader/package.json","includedInParent":true,"mtime":1595074329508},{"name":"/Users/manuchaudhary/uppy-uploader/node_modules/@uppy/dashboard/package.json","includedInParent":true,"mtime":1594921791406},{"name":"lodash.debounce","loc":{"line":1,"column":23},"parent":"/Users/manuchaudhary/uppy-uploader/node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","resolved":"/Users/manuchaudhary/uppy-uploader/node_modules/lodash.debounce/index.js"},{"name":"@uppy/utils/lib/FOCUSABLE_ELEMENTS","loc":{"line":3,"column":33},"parent":"/Users/manuchaudhary/uppy-uploader/node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","resolved":"/Users/manuchaudhary/uppy-uploader/node_modules/@uppy/utils/lib/FOCUSABLE_ELEMENTS.js"},{"name":"./getActiveOverlayEl","loc":{"line":5,"column":33},"parent":"/Users/manuchaudhary/uppy-uploader/node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","resolved":"/Users/manuchaudhary/uppy-uploader/node_modules/@uppy/dashboard/lib/utils/getActiveOverlayEl.js"}],"generated":{"js":"var debounce = require('lodash.debounce');\n\nvar FOCUSABLE_ELEMENTS = require('@uppy/utils/lib/FOCUSABLE_ELEMENTS');\n\nvar getActiveOverlayEl = require('./getActiveOverlayEl');\n/*\n  Focuses on some element in the currently topmost overlay.\n\n  1. If there are some [data-uppy-super-focusable] elements rendered already - focuses on the first superfocusable element, and leaves focus up to the control of a user (until currently focused element disappears from the screen [which can happen when overlay changes, or, e.g., when we click on a folder in googledrive]).\n  2. If there are no [data-uppy-super-focusable] elements yet (or ever) - focuses on the first focusable element, but switches focus if superfocusable elements appear on next render.\n*/\n\n\nmodule.exports = function createSuperFocus() {\n  var lastFocusWasOnSuperFocusableEl = false;\n\n  var superFocus = function superFocus(dashboardEl, activeOverlayType) {\n    var overlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n    var isFocusInOverlay = overlayEl.contains(document.activeElement); // If focus is already in the topmost overlay, AND on last update we focused on the superfocusable element - then leave focus up to the user.\n    // [Practical check] without this line, typing in the search input in googledrive overlay won't work.\n\n    if (isFocusInOverlay && lastFocusWasOnSuperFocusableEl) return;\n    var superFocusableEl = overlayEl.querySelector('[data-uppy-super-focusable]'); // If we are already in the topmost overlay, AND there are no super focusable elements yet, - leave focus up to the user.\n    // [Practical check] without this line, if you are in an empty folder in google drive, and something's uploading in the bg, - focus will be jumping to Done all the time.\n\n    if (isFocusInOverlay && !superFocusableEl) return;\n\n    if (superFocusableEl) {\n      superFocusableEl.focus({\n        preventScroll: true\n      });\n      lastFocusWasOnSuperFocusableEl = true;\n    } else {\n      var firstEl = overlayEl.querySelector(FOCUSABLE_ELEMENTS);\n      firstEl && firstEl.focus({\n        preventScroll: true\n      });\n      lastFocusWasOnSuperFocusableEl = false;\n    }\n  }; // ___Why do we need to debounce?\n  //    1. To deal with animations: overlay changes via animations, which results in the DOM updating AFTER plugin.update() already executed.\n  //    [Practical check] without debounce, if we open the Url overlay, and click 'Done', Dashboard won't get focused again.\n  //    [Practical check] if we delay 250ms instead of 260ms - IE11 won't get focused in same situation.\n  //    2. Performance: there can be many state update()s in a second, and this function is called every time.\n\n\n  return debounce(superFocus, 260);\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}}],"sources":{"../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js":"var debounce = require('lodash.debounce');\n\nvar FOCUSABLE_ELEMENTS = require('@uppy/utils/lib/FOCUSABLE_ELEMENTS');\n\nvar getActiveOverlayEl = require('./getActiveOverlayEl');\n/*\n  Focuses on some element in the currently topmost overlay.\n\n  1. If there are some [data-uppy-super-focusable] elements rendered already - focuses on the first superfocusable element, and leaves focus up to the control of a user (until currently focused element disappears from the screen [which can happen when overlay changes, or, e.g., when we click on a folder in googledrive]).\n  2. If there are no [data-uppy-super-focusable] elements yet (or ever) - focuses on the first focusable element, but switches focus if superfocusable elements appear on next render.\n*/\n\n\nmodule.exports = function createSuperFocus() {\n  var lastFocusWasOnSuperFocusableEl = false;\n\n  var superFocus = function superFocus(dashboardEl, activeOverlayType) {\n    var overlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n    var isFocusInOverlay = overlayEl.contains(document.activeElement); // If focus is already in the topmost overlay, AND on last update we focused on the superfocusable element - then leave focus up to the user.\n    // [Practical check] without this line, typing in the search input in googledrive overlay won't work.\n\n    if (isFocusInOverlay && lastFocusWasOnSuperFocusableEl) return;\n    var superFocusableEl = overlayEl.querySelector('[data-uppy-super-focusable]'); // If we are already in the topmost overlay, AND there are no super focusable elements yet, - leave focus up to the user.\n    // [Practical check] without this line, if you are in an empty folder in google drive, and something's uploading in the bg, - focus will be jumping to Done all the time.\n\n    if (isFocusInOverlay && !superFocusableEl) return;\n\n    if (superFocusableEl) {\n      superFocusableEl.focus({\n        preventScroll: true\n      });\n      lastFocusWasOnSuperFocusableEl = true;\n    } else {\n      var firstEl = overlayEl.querySelector(FOCUSABLE_ELEMENTS);\n      firstEl && firstEl.focus({\n        preventScroll: true\n      });\n      lastFocusWasOnSuperFocusableEl = false;\n    }\n  }; // ___Why do we need to debounce?\n  //    1. To deal with animations: overlay changes via animations, which results in the DOM updating AFTER plugin.update() already executed.\n  //    [Practical check] without debounce, if we open the Url overlay, and click 'Done', Dashboard won't get focused again.\n  //    [Practical check] if we delay 250ms instead of 260ms - IE11 won't get focused in same situation.\n  //    2. Performance: there can be many state update()s in a second, and this function is called every time.\n\n\n  return debounce(superFocus, 260);\n};"},"lineCount":48}},"error":null,"hash":"453c5045335891ad64edfa22c8f7a3d4","cacheData":{"env":{}}}